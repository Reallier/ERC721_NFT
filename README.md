# ERC721 NFT 合约

RC721 标准代表了非同质化代币（NFT），它为独一无二的资产提供链上表示。从数字艺术品到虚拟产权，NFT的概念正迅速被世界认可。了解并能够实现 ERC721 标准对区块链开发者至关重要。

* 测试环境
* 开发工具: Hardhat
* 测试框架: Mocha
* 断言库: Chai
* 编程语言: JavaScript / Solidity

* 初始化:
* 函数: init
* 描述: 部署 BaseERC721 和 BaseERC721Receiver 合约，并获取它们的地址。
* 钩子: beforeEach
* 描述: 在每个测试用例执行前调用 init 函数，确保每次测试都在干净的环境中进行。


* 测试用例:
*
* IERC721Metadata接口
* - 验证合约的name函数返回值是否与预期的name常量相等
* - 验证合约的symbol函数返回值是否与预期的symbol常量相等
* - tokenURI函数
* - - 验证当查询不存在的代币ID的URI时，合约应该抛出一个带有特定错误消息的异常
* - - 验证当tokenId存在时，tokenURI函数应该返回预期的baseURI
*
* IERC721 接口
* - balanceOf 函数
* - - 检查 balanceOf 函数在 mint 之前是否返回 0
* - ownerOf 函数
* - - 检查 ownerOf 函数在 mint 之后是否返回正确的持有者地址
* - approve 授权函数
* - - 合约的所有者检查能否成功批准代币
* - - 已获批准的账户是否能够成功批准代币
* - - 将代币批准给当前所有者是否会回滚并抛出错误
* - - 非所有者和非批准账户的代币批准是否会回滚并抛出错误
* - getApproved 查询批准函数
* - - 函数返回的地址与批准的地址一致
* - - 查询不存在的代币的批准信息应该失败
* - setApprovalForAll 批量授权函数
* - - 函数能否正确设置批准状态为 true 或 false
* - - 函数在尝试批准给所有者自己时是否会失败
* - transferFrom 转账函数, 主要看账户及授权相关
* - - 所有者账户的转账是否成功，并且余额是否发生变化
* - - 经过授权的账户的转账是否成功，并且余额是否发生变化
* - - 经过批量授权的账户的转账是否成功，并且余额是否发生变化
* - - 非所有者且未被授权的账户尝试转账时是否会回滚，并抛出特定的错误信息
* - - 转账不存在的代币时是否会回滚，并抛出特定的错误信息
* - - 转账到零地址时是否会回滚，并抛出特定的错误信息
* - - 从非所有者账户转账时是否会回滚，并抛出特定的错误信息
* - - 当代币被转移时，旧的批准是否会被撤销
* - safeTransferFrom安全转账函数测试, 和transferFrom大致一致, 多了检查地址是否支持ERC721标准
* - - 所有者应该成功转移代币并且余额应该改变
* - - 被批准的账户应该成功转移代币并且余额应该改变
* - - 非所有者且未被批准的账户应该转移失败并回滚
* - - 转移到不支持 ERC721Receiver 的合约应该回滚
* - - 转移到支持 ERC721Receiver 的合约应该成功
*
* mint铸币函数测试
* - 成功应该更新余额
* - 到零地址应该回滚
* - 重复的 tokenId 应该回滚
